source: magento
target: woocommerce
entity: category
description: Mapping definition from Magento Category structure to WooCommerce Category structure.

fields:
  email: email
  first_name: firstname
  last_name: lastname

  billing.first_name: addresses[?default_billing].firstname | [0]
  billing.last_name: addresses[?default_billing].lastname | [0]
  billing.address_1: addresses[?default_billing].street | [0] | [0]
  billing.address_2: addresses[?default_billing].street | [0] | [1] # Lấy dòng địa chỉ thứ 2
  billing.city: addresses[?default_billing].city | [0]
  billing.postcode: addresses[?default_billing].postcode | [0]
  billing.state: addresses[?default_billing]."region".region | [0]
  billing.phone: addresses[?default_billing].telephone | [0]

  billing.country: addresses[?default_billing].country_id | [0]

  shipping.first_name: addresses[?default_shipping].firstname | [0]
  shipping.last_name: addresses[?default_shipping].lastname | [0]
  shipping.address_1: addresses[?default_shipping].street | [0] | [0]
  shipping.address_2: addresses[?default_shipping].street | [0] | [1]
  shipping.city: addresses[?default_shipping].city | [0]
  shipping.postcode: addresses[?default_shipping].postcode | [0]
  shipping.state: addresses[?default_shipping]."region".region | [0]
  shipping.phone: addresses[?default_shipping].telephone | [0]
  shipping.country: addresses[?default_shipping].country_id | [0]

transformations:
  billing.first_name:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  billing.last_name:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  billing.address_1:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  billing.address_2:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  billing.city:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  billing.postcode:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  billing.state:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  billing.phone:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  billing.country:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE

  shipping.first_name:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  shipping.last_name:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  shipping.address_1:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  shipping.address_2:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  shipping.city:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  shipping.postcode:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  shipping.state:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  shipping.phone:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE
  shipping.country:
    - type: function
      function_name: null_to_empty_string
      params:
        value: $SOURCE_VALUE

post_processors:
  - type: function
    function_name: save_id_mapping
    params:
      created_target_record: $CREATED_TARGET_RECORD
      source_record: $SOURCE_RECORD
      source_id_field: id
      target_id_field: id
      entity: customer
      context: $CONTEXT